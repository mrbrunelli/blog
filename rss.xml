<?xml version="1.0" encoding="utf-8"?>
<rss version="2.0" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:content="http://purl.org/rss/1.0/modules/content/">
    <channel>
        <title>Blog Matheus Brunelli Blog</title>
        <link>https://mrbrunelli.github.io/blog/</link>
        <description>Blog Matheus Brunelli Blog</description>
        <lastBuildDate>Wed, 19 Oct 2022 00:00:00 GMT</lastBuildDate>
        <docs>https://validator.w3.org/feed/docs/rss2.html</docs>
        <generator>https://github.com/jpmonette/feed</generator>
        <item>
            <title><![CDATA[Aprenda a escrever testes - Parte 2]]></title>
            <link>https://mrbrunelli.github.io/blog/aprenda-a-testar-pt2</link>
            <guid>aprenda-a-testar-pt2</guid>
            <pubDate>Wed, 19 Oct 2022 00:00:00 GMT</pubDate>
            <description><![CDATA[Como utilizar um framework de testes no Node?]]></description>
            <content:encoded><![CDATA[<p>Como configurar e utilizar um framework de testes no Node utilizando Typescript? Temos várias opções excelentes para isso, e por esse motivo irei escolher a mais fácil para o cenário de Node + Typescript.</p><h2 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="como-escolher-um-framework-de-testes">Como escolher um framework de testes?<a class="hash-link" href="#como-escolher-um-framework-de-testes" title="Link direto para o título">​</a></h2><p>Primeiro devo avaliar quais os cenários quero testar, se é frontend ou backend, e se vou utilizar Javascript ou Typescript.</p><p>Vou utilizar Node + Typescript nos exemplos, e isso faz a minha lista ficar restrita a alguns nomes:</p><ul><li><a href="https://jestjs.io/pt-BR/" target="_blank" rel="noopener noreferrer">Jest</a></li><li><a href="https://mochajs.org/" target="_blank" rel="noopener noreferrer">Mocha</a></li><li><a href="https://vitest.dev/" target="_blank" rel="noopener noreferrer">Vitest</a></li></ul><blockquote><p>Jest e Mocha necessitam de um parser de Typescript para executar, como o ts-jest ou ts-node, o que pode complicar para quem está começando, já que o arquivo de configuração fica muito complexo nesses cenários.</p></blockquote><p>Não quero abrir mão do Typescript e nem da facilidade de configuração, então irei escolher o Vitest. Na página inicial do Vitest contém o <a href="https://vitest.dev/guide/" target="_blank" rel="noopener noreferrer">Get Started</a> contendo alguns exemplos de instalação e configuração.</p><h2 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="configurando-o-projeto">Configurando o projeto<a class="hash-link" href="#configurando-o-projeto" title="Link direto para o título">​</a></h2><h3 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="setup-node--typescript">Setup Node + Typescript<a class="hash-link" href="#setup-node--typescript" title="Link direto para o título">​</a></h3><p>Vou criar uma pasta vazia, com um nome qualquer.</p><div class="codeBlockContainer_I0IT language-sh theme-code-block"><div class="codeBlockContent_wNvx sh"><pre tabindex="0" class="prism-code language-sh codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">mkdir vitest-typescript-example</span><br></span></code></pre><button type="button" aria-label="Copiar código para a área de transferência" class="copyButton_wuS7 clean-btn">Copiar</button></div></div><p>Com o meu Visual Studio Code aberto nessa pasta, vou abrir um terminal integrado e iniciar o Node, e instalar as dependências básicas para o Typescript funcionar.</p><div class="codeBlockContainer_I0IT language-sh theme-code-block"><div class="codeBlockContent_wNvx sh"><pre tabindex="0" class="prism-code language-sh codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">npm init -y</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">npm install -D typescript @types/node</span><br></span></code></pre><button type="button" aria-label="Copiar código para a área de transferência" class="copyButton_wuS7 clean-btn">Copiar</button></div></div><p>Agora vou criar o tsconfig.json, que é o arquivo de configuração do Typescript. Ele irá gerar uma configuração default, e vou manter ela.</p><div class="codeBlockContainer_I0IT language-sh theme-code-block"><div class="codeBlockContent_wNvx sh"><pre tabindex="0" class="prism-code language-sh codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">npx tsc --init</span><br></span></code></pre><button type="button" aria-label="Copiar código para a área de transferência" class="copyButton_wuS7 clean-btn">Copiar</button></div></div><p>Pronto, meu projeto já está configurado com Node + Typescript.</p><h3 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="setup-vitest">Setup Vitest<a class="hash-link" href="#setup-vitest" title="Link direto para o título">​</a></h3><p>Agora vou instalar o Vitest como dependência de desenvolvimento.</p><div class="codeBlockContainer_I0IT language-sh theme-code-block"><div class="codeBlockContent_wNvx sh"><pre tabindex="0" class="prism-code language-sh codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">npm install -D vitest</span><br></span></code></pre><button type="button" aria-label="Copiar código para a área de transferência" class="copyButton_wuS7 clean-btn">Copiar</button></div></div><p>O Vitest precisa de um arquivo de configuração para poder executar. Na própria documentação tem um exemplo simples. Vou criar um arquivo <strong>vitest.config.ts</strong> na raiz, e adicionar a configuração básica.</p><div class="codeBlockContainer_I0IT language-ts theme-code-block"><div style="color:#393A34;background-color:#f6f8fa" class="codeBlockTitle_BvAR">vitest.config.ts</div><div class="codeBlockContent_wNvx ts"><pre tabindex="0" class="prism-code language-ts codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token keyword module" style="color:#00009f">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:#393A34">{</span><span class="token imports"> defineConfig </span><span class="token imports punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"vitest/config"</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword module" style="color:#00009f">export</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">default</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">defineConfig</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  test</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    reporters</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"verbose"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><button type="button" aria-label="Copiar código para a área de transferência" class="copyButton_wuS7 clean-btn">Copiar</button></div></div><p>Veja como o arquivo de configuração é enxuto, bem diferente dos outros frameworks citados no começo do post. <a href="https://vitest.dev/config/" target="_blank" rel="noopener noreferrer">Na documentação tenho acesso a API</a>, e como posso personalizar o <strong>defineConfig()</strong>. Não vou configurar nada extra, já está ótimo como está.</p><blockquote><p>Veja que configurei <strong>reporters</strong> como <strong>verbose</strong>, isso para que eu possa obter todas as informações do teste no terminal.</p></blockquote><h3 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="configurando-o-packagejson">Configurando o package.json<a class="hash-link" href="#configurando-o-packagejson" title="Link direto para o título">​</a></h3><p>Quando eu executei o <strong>npm init -y</strong>, foi gerado um arquivo <strong>package.json</strong> na raiz, com algumas configurações bem simples. Dentro de <strong>scripts</strong> tem um script <strong>test</strong>. Vou editá-lo.</p><div class="codeBlockContainer_I0IT language-json theme-code-block"><div style="color:#393A34;background-color:#f6f8fa" class="codeBlockTitle_BvAR">package.json</div><div class="codeBlockContent_wNvx json"><pre tabindex="0" class="prism-code language-json codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token property" style="color:#36acaa">"scripts"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">"test"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"vitest --run"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">...</span><br></span></code></pre><button type="button" aria-label="Copiar código para a área de transferência" class="copyButton_wuS7 clean-btn">Copiar</button></div></div><blockquote><p>Agora quando eu executar <code>npm run test</code> no terminal, o vitest irá executar meus testes. Como não temos nenhum teste no momento, ele tentará rodar e retornará um erro dizendo que nenhum teste foi encontrado.</p></blockquote><h2 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="escrevendo-o-primeiro-teste">Escrevendo o primeiro teste<a class="hash-link" href="#escrevendo-o-primeiro-teste" title="Link direto para o título">​</a></h2><p>Vou criar uma pasta <strong>test</strong> na raiz, e criar um arquivo chamado <strong>primeiro-teste.test.ts</strong> dentro dela. Em seguida irei adicionar alguns cenários.</p><blockquote><p>É importante respeitar a extensão <strong>.test.ts</strong>, pois o Vitest procura por essa extensão durante a execução.</p></blockquote><div class="codeBlockContainer_I0IT language-ts theme-code-block"><div style="color:#393A34;background-color:#f6f8fa" class="codeBlockTitle_BvAR">primeiro-teste.test.ts</div><div class="codeBlockContent_wNvx ts"><pre tabindex="0" class="prism-code language-ts codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token keyword module" style="color:#00009f">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:#393A34">{</span><span class="token imports"> describe</span><span class="token imports punctuation" style="color:#393A34">,</span><span class="token imports"> test</span><span class="token imports punctuation" style="color:#393A34">,</span><span class="token imports"> expect </span><span class="token imports punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"vitest"</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">describe</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"Contém um conjunto de testes, que será executado um a um"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#d73a49">test</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"Deve somar 20 + 50 e retornar 70"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">expect</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">20</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">50</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">toBe</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">70</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#d73a49">test</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"Deve concatenar a palavra 'Olá' com a palavra 'Mundo' e retornar 'Olá Mundo'"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">expect</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"Olá "</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"Mundo"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">toBe</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"Olá Mundo"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#d73a49">test</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"Deve retornar que o Palmeiras não tem mundial"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> temMundial </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">false</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">expect</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">temMundial</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">toBeFalsy</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#d73a49">test</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"Deve conter todos os valores do objeto fornecido"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> meuObjeto </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      nome</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"Palmeiras"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      temMundial</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">false</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      cor</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"Verde"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">expect</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">meuObjeto</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">toEqual</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      nome</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"Palmeiras"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      temMundial</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">false</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      cor</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"Verde"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><button type="button" aria-label="Copiar código para a área de transferência" class="copyButton_wuS7 clean-btn">Copiar</button></div></div><p>Agora vou abrir o terminal e executar <code>npm run test</code>, e o Vitest irá executar e retornar todos esses cenários no terminal, verde caso tenha passado, e vermelho caso tenha reprovado algum.</p><h3 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="sucesso">Sucesso<a class="hash-link" href="#sucesso" title="Link direto para o título">​</a></h3><p><img src="/blog/assets/images/vitest-sucess-20feb8caef2209546910c0cbe62f35de.png" width="664" height="302"></p><h3 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="erro">Erro<a class="hash-link" href="#erro" title="Link direto para o título">​</a></h3><p>Adicionei um campo a mais no objeto do último teste, <strong>porém não adicionei no expect</strong>, logo o teste fez a comparação e reprovou, pois os objetos não são mais iguais.</p><blockquote><p>Veja como a inteface é amigável, ela exibe com muita clareza qual teste reprovou e o motivo.</p></blockquote><p><img src="/blog/assets/images/vitest-error-6e60e31933520b832c84088fbbab24d9.png" width="942" height="564"></p><h2 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="resumo">Resumo<a class="hash-link" href="#resumo" title="Link direto para o título">​</a></h2><ul><li>Preciso saber em qual cenário vou escrever meus testes, se é frontend ou backend, pois cada um possuí a ferramenta certa para o cenário.</li><li>Se eu ainda não sei testar, devo procurar o framework mais fácil para aprender. Nesse caso foi o Vitest, pois ele tem uma filosofia <strong>less config</strong>.</li><li>A documentação contém tudo que preciso para configurar o framework, e ainda contém vários exemplos.</li><li>O Vitest procura por arquivos que tenham a extensão <strong>.test.ts</strong>.</li><li>Os resultados dos testes são exibidos no terminal, de uma forma muito amigável.</li><li>Posso executar o comando <code>npm run test</code> quantas vezes quiser, e o teste executará em milésimos de segundos.</li><li>Automatizar é bem melhor que testar manualmente.</li></ul><h3 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="repositório-com-o-código">Repositório com o código<a class="hash-link" href="#repositório-com-o-código" title="Link direto para o título">​</a></h3><p><a href="https://github.com/mrbrunelli/vitest-typescript-example/tree/aprenda-a-testar-parte-2" target="_blank" rel="noopener noreferrer">https://github.com/mrbrunelli/vitest-typescript-example/tree/aprenda-a-testar-parte-2</a></p>]]></content:encoded>
            <category>teste</category>
            <category>cobertura</category>
            <category>qualidade</category>
            <category>testes automatizados</category>
            <category>vitest</category>
        </item>
        <item>
            <title><![CDATA[Aprenda a escrever testes - Parte 1]]></title>
            <link>https://mrbrunelli.github.io/blog/aprenda-a-testar-pt1</link>
            <guid>aprenda-a-testar-pt1</guid>
            <pubDate>Mon, 17 Oct 2022 00:00:00 GMT</pubDate>
            <description><![CDATA[Para que servem os testes? Como faço para escrever um teste?]]></description>
            <content:encoded><![CDATA[<p>Para que servem os testes? Como faço para escrever um teste? Esse tema ainda pode ser muito confuso para quem está começando a programar, e até para quem já possuí mais tempo de estrada.</p><h2 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="afinal-para-que-servem-os-testes">Afinal, para que servem os testes?<a class="hash-link" href="#afinal-para-que-servem-os-testes" title="Link direto para o título">​</a></h2><p>Antes de responder essa pergunta, vamos entender de que testes estamos falando. A primeira coisa que me vem a mente quando alguém me pede para testar a aplicação é: <strong>executar a aplicação e fazer alguma ação e ver se o resultado esperado foi alcançado.</strong></p><p>Esse conceito está correto, e de fato isso é "testar a aplicação". Entretanto uma aplicação irá conter muitos recursos, que se forem testadas de forma manual, levará muito tempo e desgastará quem está testando. Também haverá possibilidades de erros humanos durante esse processo.</p><h3 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="testes-automatizados">Testes automatizados<a class="hash-link" href="#testes-automatizados" title="Link direto para o título">​</a></h3><p>Para isso existem os <strong>testes automatizados</strong>, que é uma forma de <strong>executar um script que irá testar todas as ações da aplicação</strong>, de forma automática, <strong>simulando a interação humana</strong> e observando se <strong>o resultado esperado foi alcaçado</strong>.</p><p>Os benefícios dessa prática são muitos, visto que, se o teste é automatizado, posso executá-lo e assim esperar para ver se todas as funcionalidades do sistema <strong>ainda estão ok e se comportando como deveriam</strong>. Dessa forma é possível simular toda a interação humana em todos os módulos do sistema, <strong>e em poucos segundos.</strong></p><h3 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="requisitos-para-escrever-um-teste">Requisitos para escrever um teste<a class="hash-link" href="#requisitos-para-escrever-um-teste" title="Link direto para o título">​</a></h3><p>Primeiramente devemos entender as regras de negócio da aplicação, e saber como devem se comportar em diferentes situações.</p><p>Vamos supor que nosso sistema recebe dois números e retorna a soma desses números para o usuário. Para escrever um teste em cima dessa funcionalidade, deveremos prover <strong>dois números de entrada</strong> e observar se o valor retornado <strong>é a soma dos dois números fornecidos</strong>. Se o resultado de fato for a soma dos dois números fornecidos, então o teste passará, do contrário ele reprovará.</p><h3 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="exemplo-1">Exemplo 1<a class="hash-link" href="#exemplo-1" title="Link direto para o título">​</a></h3><div class="codeBlockContainer_I0IT language-ts theme-code-block"><div style="color:#393A34;background-color:#f6f8fa" class="codeBlockTitle_BvAR">calculadora.ts</div><div class="codeBlockContent_wNvx ts"><pre tabindex="0" class="prism-code language-ts codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token keyword module" style="color:#00009f">export</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">class</span><span class="token plain"> </span><span class="token class-name maybe-class-name">Calculadora</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#d73a49">somar</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">numero1</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">number</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> numero2</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">number</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> numero1 </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> numero2</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><button type="button" aria-label="Copiar código para a área de transferência" class="copyButton_wuS7 clean-btn">Copiar</button></div></div><div class="codeBlockContainer_I0IT language-ts theme-code-block"><div style="color:#393A34;background-color:#f6f8fa" class="codeBlockTitle_BvAR">calculadora.test.ts</div><div class="codeBlockContent_wNvx ts"><pre tabindex="0" class="prism-code language-ts codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token keyword module" style="color:#00009f">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:#393A34">{</span><span class="token imports"> </span><span class="token imports maybe-class-name">Calculadora</span><span class="token imports"> </span><span class="token imports punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"./calculadora"</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">test</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"Deve somar 10 + 10 e retornar 20"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> calculadora </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name maybe-class-name">Calculadora</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> resultado </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> calculadora</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">somar</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">10</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">10</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#d73a49">expect</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">resultado</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">toBe</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">20</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// true, logo o teste passará.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><button type="button" aria-label="Copiar código para a área de transferência" class="copyButton_wuS7 clean-btn">Copiar</button></div></div><h3 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="exemplo-2">Exemplo 2<a class="hash-link" href="#exemplo-2" title="Link direto para o título">​</a></h3><p>Agora, se eu alterar a regra de negócios do método <strong>somar</strong>, e fazê-lo retornar a multiplicação ao invés da soma, <strong>nosso teste irá reprovar</strong>, pois ele espera que o resultado seja <strong>20</strong> e não <strong>100</strong>.</p><div class="codeBlockContainer_I0IT language-ts theme-code-block"><div style="color:#393A34;background-color:#f6f8fa" class="codeBlockTitle_BvAR">calculadora.ts</div><div class="codeBlockContent_wNvx ts"><pre tabindex="0" class="prism-code language-ts codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token keyword module" style="color:#00009f">export</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">class</span><span class="token plain"> </span><span class="token class-name maybe-class-name">Calculadora</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#d73a49">somar</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">numero1</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">number</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> numero2</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">number</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> numero1 </span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> numero2</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><button type="button" aria-label="Copiar código para a área de transferência" class="copyButton_wuS7 clean-btn">Copiar</button></div></div><div class="codeBlockContainer_I0IT language-ts theme-code-block"><div style="color:#393A34;background-color:#f6f8fa" class="codeBlockTitle_BvAR">calculadora.test.ts</div><div class="codeBlockContent_wNvx ts"><pre tabindex="0" class="prism-code language-ts codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token keyword module" style="color:#00009f">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:#393A34">{</span><span class="token imports"> </span><span class="token imports maybe-class-name">Calculadora</span><span class="token imports"> </span><span class="token imports punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"./calculadora"</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">test</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"Deve somar 10 + 10 e retornar 20"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> calculadora </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name maybe-class-name">Calculadora</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> resultado </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> calculadora</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">somar</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">10</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">10</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token console class-name">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">resultado</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// 100</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#d73a49">expect</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">resultado</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">toBe</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">20</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// 100 != 20, logo é false, o teste reprovará.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><button type="button" aria-label="Copiar código para a área de transferência" class="copyButton_wuS7 clean-btn">Copiar</button></div></div><h2 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="o-que-eu-devo-testar">O que eu devo testar?<a class="hash-link" href="#o-que-eu-devo-testar" title="Link direto para o título">​</a></h2><p>Posso testar as regras de negócio de uma classe <strong>(unidade)</strong>, a integração de um serviço com o banco de dados <strong>(integração)</strong> e o comportamento geral do sistema <strong>(de ponta a ponta)</strong>.</p><p>Logo temos testes de unidade, testes de integração e testes de ponta a ponta.</p><p>Para que haja uma excelente cobertura, devemos utilizar todos esses tipos de testes. Alguns desenvolvedores optam por utilizar apenas um desses tipos de testes, o que pode resultar em <strong>uma ou várias lacunas na cobertura do sistema.</strong></p><h2 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="resumo">Resumo<a class="hash-link" href="#resumo" title="Link direto para o título">​</a></h2><ul><li>Testar é executar uma ação no sistema e observar se o resultado obtivo é de fato esperado.</li><li>Testes automatizados excluem a necessidade de testes humanos e manuais.</li><li>Os tipos de testes são: unidade, integração e de ponta a ponta.</li><li>Testar garante que o comportamento do sistema será preservado. Em caso de quebra, os testes avisarão onde ocorreu a quebra.</li><li>Se um sistema não possuí testes automatizados, não há como o desenvolvedor saber se a alteração que ele fez quebrou o sistema. Ele terá que testar manualmente, e em muitos dos casos poderão ocorrer falhas humanas e o sistema poderá ir para produção com defeito <strong>(em muitos casos isso pode significar prejuízo financeiro para a empresa, e até falência da mesma).</strong></li></ul><h3 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="repositório-com-o-código">Repositório com o código<a class="hash-link" href="#repositório-com-o-código" title="Link direto para o título">​</a></h3><p><a href="https://github.com/mrbrunelli/vitest-typescript-example/tree/aprenda-a-testar-parte-1" target="_blank" rel="noopener noreferrer">https://github.com/mrbrunelli/vitest-typescript-example/tree/aprenda-a-testar-parte-1</a></p>]]></content:encoded>
            <category>teste</category>
            <category>cobertura</category>
            <category>qualidade</category>
            <category>testes automatizados</category>
        </item>
        <item>
            <title><![CDATA[Minha jornada de estudos]]></title>
            <link>https://mrbrunelli.github.io/blog/minha-jornada-de-estudos</link>
            <guid>minha-jornada-de-estudos</guid>
            <pubDate>Wed, 27 Apr 2022 00:00:00 GMT</pubDate>
            <description><![CDATA[Com tanto conteúdo para estudar, como escolhi os mais vantajosos para minha carreira?]]></description>
            <content:encoded><![CDATA[<p>Eai pessoal, tudo bem com vocês? Hoje quero compartilhar minha jornada de estudos, e como fiz minhas escolhas se alinharem com meus objetivos e carreira.</p><p>Pra quem não me conhece, dá uma passada no meu <a href="https://www.linkedin.com/in/mrbrunelli/" target="_blank" rel="noopener noreferrer">LinkedIn</a>, ali contém toda minha jornada, experiências etc.</p><h2 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="minha-jornada">Minha Jornada<a class="hash-link" href="#minha-jornada" title="Link direto para o título">​</a></h2><p>Antes de tudo, não saí que nem louco sem ter um rumo. Tudo foi muito bem planejado com minha família. Por isso, considero a <strong>direção e objetivos</strong> muito importantes. Cada pessoa tem uma história, uma vida, desejos e objetivos. Se não <strong>alinharmos as expectativas</strong> primeiro, o resto não irá acontecer.</p><h3 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="direção">Direção<a class="hash-link" href="#direção" title="Link direto para o título">​</a></h3><p>Uma coisa é certa, se a gente não tiver uma direção, vamos acabar <strong>andando em círculos</strong>. Existem pessoas que estudam sem foco, e ficam frustradas porque não conseguem sair do lugar.</p><p>Eu estive perto de pessoas que não eram felizes em seu trabalho, e que reclamavam o dia inteiro por suas condições, salário e família etc.</p><p>De forma alguma eu gostaria de acabar assim, sempre tive o desejo de fazer algo <strong>relevante</strong>, ser <strong>feliz</strong> e <strong>bem remunerado</strong> por isso.</p><p>Inclusive, nesse período conheci o <a href="https://pt.wikipedia.org/wiki/Ikigai" target="_blank" rel="noopener noreferrer">Ikigai</a>, que podemos entender por <strong>"razão de viver"</strong>. Isso me ajudou a entender que nós podemos fazer algo que amamos e ainda sermos muito bem remunerados por isso.</p><p>Depois de entender e aceitar isso, tracei meu plano de vida e carreira.</p><h4 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="ikigai">Ikigai<a class="hash-link" href="#ikigai" title="Link direto para o título">​</a></h4><p><img alt="Ikigai" src="/blog/assets/images/ikigai-8b1c76f4e7292dce4bac4c9457b4c74a.png" width="2169" height="1497"></p><h3 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="plano-de-vida-e-carreira">Plano de vida e carreira<a class="hash-link" href="#plano-de-vida-e-carreira" title="Link direto para o título">​</a></h3><p>Sentei com minha esposa, e colocamos no papel tudo que gostaríamos de realizar, viagens, bens materiais, filhos, cerveja etc. E calculamos valores em dinheiro mesmo, que nos daria liberdade para realizar todos os nossos sonhos.</p><p>Depois de um tempo refletindo sobre, pesquisei no mercado as stacks mais utilizadas, o tipo de conhecimento mais valorizado, chamei devs do IFood, Mercado Livre, e UOL no chat do LinkedIn, e perguntei o que eles usavam lá, se curtiam a empresa, se o salário era bom etc.</p><p>Isso me deu uma <strong>boa base</strong> do que as <strong>empresas grandes</strong> estão utilizando, e o que <strong>buscam em um profissional</strong>.</p><p>Esse processo que eu fiz, curso nenhum ensina. Tem que ter vontade e correr atrás das informações que você precisa. Ninguém irá trazer nada até você.</p><h2 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="tecnologias-que-escolhi-para-estudar">Tecnologias que escolhi para estudar<a class="hash-link" href="#tecnologias-que-escolhi-para-estudar" title="Link direto para o título">​</a></h2><p>Ser generalista é bom até um ponto, mas depois temos que descer e se <strong>aprofundar</strong> em algo, <strong>se quisermos nos destacar</strong>. Vou trazer aqui as tecnologias que me abriram portas, e no final a que eu foquei e estou me especializando até o momento.</p><p>Depois de conhecer um pouco a realidade do mercado, filtrei as tecnologias que faziam sentido pra mim e comecei a estudá-las.</p><h3 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="react">React<a class="hash-link" href="#react" title="Link direto para o título">​</a></h3><p>Se tem uma tecnologia que é campeã disparada no mercado Front-End, é o <a href="https://pt-br.reactjs.org/" target="_blank" rel="noopener noreferrer">React</a>.</p><p>Não sabe o que é isso? Então toma aqui e assiste: <a href="https://youtu.be/NhUr8cwDiiM" target="_blank" rel="noopener noreferrer">O que é React?</a></p><p>Eu estudei o essencial dessa tecnologia para conseguir me virar. Vou colocar os principais tópicos, pois com isso você já consegue criar muita coisa:</p><ul><li>Consumir APIs</li><li>Gerenciar estados da aplicação</li><li>Gerenciar rotas da aplicação</li><li>Estilização (CSS)</li><li>Componentização</li><li>Renderização condicional</li></ul><h3 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="postgresql">PostgreSQL<a class="hash-link" href="#postgresql" title="Link direto para o título">​</a></h3><p>Não tem como fugir, em algum momento da sua carreira você irá precisar fazer uma query SQL, criar uma tabela, atualizar um registro etc. A maioria das empresas utilizam bancos de dados SQL.</p><p>Existem os NoSQL como o MongoDB, mas ele é tranquilo de aprender, e não é tão utilizado como o <a href="https://www.postgresql.org/" target="_blank" rel="noopener noreferrer">PostgreSQL</a> por exemplo. Então deixe o SQL em dia primeiro, depois você expande seu ferramental.</p><p>Não sabe o que é SQL e pra que serve? Pega aqui <a href="https://youtu.be/kMznyI7r2Tc" target="_blank" rel="noopener noreferrer">O que é SQL?</a></p><p><strong>Aprenda o essencial</strong>, não tente fazer um curso de DBA se você quer ser desenvolvedor. Foque no essencial, e conforme for precisando você vai se capacitando. Tópicos bons para estudar:</p><ul><li>Criar, editar e deletar banco de dados</li><li>Criar, editar e deletar tabelas</li><li>Relacionamento entre tabelas</li><li>Consulta, Filtros e Agrupadores</li></ul><h3 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="docker">Docker<a class="hash-link" href="#docker" title="Link direto para o título">​</a></h3><p>Isso aqui vai deixar sua vida muito mais fácil. Como você subiria um banco de dados na sua máquina? Teria que instalar um monte de parafernalha, e configurar um monte de coisa que você nem saberia para que serve.</p><p>O Docker permite que você crie containers para sua aplicação, como por exemplo nosso banco de dados. Ele sobe uma máquina linux somente com o essencial, bem leve. E você pode subir seu banco de dados ai dentro desse container, sem precisar instalar as parafernalhas na sua máquina. Isso mesmo, todas as "tranqueiras" ficam ali no container apenas.</p><p>Não sabe o que é e pra que serve? Já assiste aí <a href="https://youtu.be/-pUZBovqRcU" target="_blank" rel="noopener noreferrer">O que é Docker?</a></p><p>Alguns tópicos essenciais para o estudo:</p><ul><li>Como criar uma Imagem</li><li>Como criar um Container baseado em uma Imagem</li><li>Como comunicar um Container com o outro</li><li>Como transferir os arquivos da minha máquina para o Container e vice versa?</li><li>Dockerfile e docker-compose</li></ul><h3 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="git-e-github">Git e GitHub<a class="hash-link" href="#git-e-github" title="Link direto para o título">​</a></h3><p>Esse aqui é um dos mais importantes, e você deve dominar os principais comandos, pois eles são utilizados o dia todo.</p><p>Inclusive, sempre que for estudar, como criar um projeto em React por exemplo, suba para seu GitHub e deixe público. Com isso você aprende Git enquanto aprende outra tecnologia como o React.</p><p>Não conhece nenhum dos dois? Então assiste aí <a href="https://youtu.be/za5KWZ5pRag" target="_blank" rel="noopener noreferrer">O que é Git?</a> e <a href="https://youtu.be/myQuetgSEsY" target="_blank" rel="noopener noreferrer">O que é GitHub</a></p><p>Tópicos essenciais para estudar:</p><ul><li>Como criar um repositório?</li><li>Como versionar meu código?</li><li>Como criar uma nova branch?</li><li>Como desfazer um commit?</li><li>Como voltar em um commit antigo?</li><li>Pull Request, Merge</li><li>GitFlow</li><li>GitHub Actions</li></ul><h3 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="api-rest">API REST<a class="hash-link" href="#api-rest" title="Link direto para o título">​</a></h3><p>Por que é importante estudar API? Porque a maioria dos serviços que você irá consumir são baseados em <a href="https://pt.wikipedia.org/wiki/Hypertext_Transfer_Protocol" target="_blank" rel="noopener noreferrer">Http</a>. Você também irá trafegar muitos dados através de APIs.</p><p>Inclusive, tudo que você aprender aqui, acabará utilizando tanto no Back-End quanto no Front-End. Já que na maioria das vezes o Front-End se conecta ao Back-End utilizando uma API.</p><p>Existe um <a href="https://mockapi.io/" target="_blank" rel="noopener noreferrer">serviço</a> bem legal que é online e gratuito, onde você pode criar sua API fake e consumi-lá com uma <a href="https://insomnia.rest/download" target="_blank" rel="noopener noreferrer">ferramenta apropriada</a>. Para um primeiro contato é ótimo!</p><p>Não sabe o que são esses termos? Tome aqui <a href="https://youtu.be/vGuqKIRWosk" target="_blank" rel="noopener noreferrer">O que é API</a> e <a href="https://www.youtube.com/watch?v=S7MduKwvVGk" target="_blank" rel="noopener noreferrer">O que é REST</a></p><p>Tópicos essenciais:</p><ul><li>O que é Http e para que serve?</li><li>Principais métodos Http: GET, POST, PUT, DELETE</li><li>O que é uma rota?</li><li>O que são Body, Headers, Params e Query String</li><li>O que são os Status Code?</li><li>Por que utilizar JSON no Body?</li><li>O que é JWT? Para que serve?</li></ul><h3 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="testes-unitários">Testes unitários<a class="hash-link" href="#testes-unitários" title="Link direto para o título">​</a></h3><p>Sério, isso aqui ninguém dá valor, sempre deixam pra estudar por último. Caso você já esteja conseguindo construir sua aplicação sozinho, mesmo que de uma maneira bem simples, já pode começar a escrever testes nela.</p><p>Leva tempo para aprender testar bem uma aplicação, mas é satisfatório saber que o teste te avirasá se algo estiver quebrado.</p><p>Recomendo <a href="https://medium.com/rd-shipit/test-doubles-mocks-stubs-fakes-spies-e-dummies-a5cdafcd0daf" target="_blank" rel="noopener noreferrer">essa leitura</a> quando você já estiver com uma boa prática na criação de testes.</p><p>Ainda não sabe o que são testes e para que servem? Veja esses vídeos <a href="https://www.youtube.com/watch?v=9e81T1B5MlI" target="_blank" rel="noopener noreferrer">O que são testes unitários</a> e <a href="https://www.youtube.com/watch?v=MQs8_KIj_PU" target="_blank" rel="noopener noreferrer">Como implementar testes unitários</a></p><h3 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="cloud">Cloud<a class="hash-link" href="#cloud" title="Link direto para o título">​</a></h3><p>É bom pelo menos ter noção de um serviço Cloud. Eu recomendo começar com a <a href="https://aws.amazon.com/pt/free/?trk=5d5339c5-8893-47b1-9938-f4faa5f4b277&amp;sc_channel=acquisition&amp;sc_medium=ACQ-P%7CPS-BI%7CBrand%7CDesktop%7CSU%7CAWS%7CCore%7CBR%7CEN%7CText&amp;s_kwcid=AL!4422!10!71330970420581!71331411104724&amp;ef_id=ec51f4042b15144560fc966da648666b:G:s&amp;s_kwcid=AL!4422!10!71330970420581!71331411104724&amp;all-free-tier.sort-by=item.additionalFields.SortRank&amp;all-free-tier.sort-order=asc&amp;awsf.Free%20Tier%20Types=*all&amp;awsf.Free%20Tier%20Categories=*all" target="_blank" rel="noopener noreferrer">AWS</a>, considero a mais fácil de todas.</p><p>Hoje a maioria das aplicações estão distribuídas em cloud, então provavelmente você irá ter contato recorrente com ela no mercado.</p><p>Tá meio confuso ainda? Confere aqui <a href="https://www.youtube.com/watch?v=Dwm1PqEX-8I" target="_blank" rel="noopener noreferrer">Como criar meu primeiro Bucket S3 na AWS</a></p><p>Caso queira um caminho para começar, segue esses tópicos essenciais:</p><ul><li>O que é AWS?</li><li>Como criar um Bucket S3?</li><li>Para que serve um CDN?</li><li>Como fazer deploy do meu projeto na AWS?</li><li>Como criar um novo usuário e dar permissões personalizadas?</li><li>O que é SQS, e para que serve?</li><li>O que é uma Lambda? Quando devo utilizar?</li></ul><h3 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="node">Node<a class="hash-link" href="#node" title="Link direto para o título">​</a></h3><p>E cá estamos, em minha tecnologia favorita! Comecei estudando Node junto com React através de bootcamps gratuitos e me apaixonei. Depois disso decidi comprar livros e treinamentos mais avançados, para poder me aprofundar na ferramenta.</p><p>Node é utilizado em tudo que é lugar, e é muito fácil de aprender o essencial. Existem muitos <a href="https://www.youtube.com/results?search_query=como+criar+api+node" target="_blank" rel="noopener noreferrer">tutoriais no YouTube</a> e <a href="https://github.com/search?q=node+examples" target="_blank" rel="noopener noreferrer">exemplos no GitHub</a>, o que torna o aprendizado muito mais fluído.</p><p>De um ano pra cá direcionei todos os meus estudos para Back-End com Node e não me arrependi. Tudo que preciso para criar uma aplicação robusta existe no ecossistema dessa ferramenta.</p><p>É muito fácil começar, só entrar no <a href="https://nodejs.org/en/" target="_blank" rel="noopener noreferrer">site oficial</a> e fazer o download.</p><p>Não sabe o que é e para que serve? Assista aqui <a href="https://youtu.be/vYekSMBCCiM" target="_blank" rel="noopener noreferrer">O que é Node?</a> e <a href="https://youtu.be/9AO2hZJsHrs" target="_blank" rel="noopener noreferrer">Como fazer um CRUD com Node + Express + PostgreSQL?</a></p><p>Tópicos essenciais para começar:</p><ul><li>O que é NPM?</li><li>Para que serve o package.json?</li><li>O que são dependências?</li><li>O que é um módulo?</li><li>Como importar e exportar módulos?</li><li>Por que o Node é Single Thread?</li><li>O que é Event Loop?</li><li>O que é Promise?</li><li>Async/Await</li><li>O que são Callbacks e quando utilizar?</li><li>Como construir uma API com Express?</li><li>Como conectar com um banco de dados?</li><li>Como fazer um CRUD?</li></ul><h3 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="no-que-estou-me-especializando">No que estou me especializando?<a class="hash-link" href="#no-que-estou-me-especializando" title="Link direto para o título">​</a></h3><p>Existem muitas ferramentas para complementar o desenvolvimento de software com Node, e como estou focado em Back-End, estou estudando as seguintes tecnologias e frameworks, pois elas fazem parte da minha rotina e o mercado utiliza muito:</p><ul><li>NestJS</li><li>Serverless Framework</li><li>Mensageria e Eventos</li><li>Microsserviços</li><li>Terraform</li><li>AWS</li><li>TDD</li></ul><h2 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="como-adquirir-conhecimento-nessas-tecnologias">Como adquirir conhecimento nessas tecnologias?<a class="hash-link" href="#como-adquirir-conhecimento-nessas-tecnologias" title="Link direto para o título">​</a></h2><p>Isso vai depender de como você aprende melhor. Eu prefiro muito mais os livros, porque eu consigo acompanhar todo o raciocínio do autor até a solução, e é muito mais detalhado. Porém quando preciso de algo rápido, e que não estou encontrando na documentação, vou no YouTube mesmo.</p><p>Hoje você consegue acessar <strong>gratuitamente</strong> qualquer curso dessas tecnologias no YouTube, ou com um preço bem em conta na Udemy por exemplo.</p><p>Eu costumo comprar apenas treinamentos <strong>mais avançados</strong>, que <strong>não são encontrados de graça</strong>. Tu não precisa comprar um curso de como fazer um CRUD em Node, existem milhares de vídeos e bootcamps ensinando a mesma coisa no YouTube. Sem falar nos milhares de exemplos no GitHub.</p><p>Não seja só um copiador passivo, termine a aula e tente fazer sozinho, tente aplicar teu conhecimento em um cenário diferente, teste seu próprio conhecimento e depois <strong>suba no GitHub esse seu aprendizado.</strong></p><p>Exercite todo dia, até você chegar em seu objetivo, depois o ritmo <strong>desacelera naturamente</strong>, pois você aprenderá novas tecnologias com <strong>muito mais facilidade</strong>.</p><p>Como eu disse lá em cima, alinhe suas expectativas com sua família, converse e explique para sua família e amigos que você está focado nos estudos, e que precisa de um tempo. Se eles te amam, vão entender com certeza.</p><h2 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="conclusão">Conclusão<a class="hash-link" href="#conclusão" title="Link direto para o título">​</a></h2><p>Se isso aqui fez sentido para você, então coloque em prática o que <strong>você acha necessário</strong> para seu momento. Compartilhe com seus amigos e discutam isso. Discutir um tema com um amigo que também esta estudando na mesma pegada que você é muito bom, a gente aprende demais!</p><p>Agora se isso não fez sentido pra você, procure encontrar algo que faça e coloque suas forças nisso! Só não vale reclamar de braços cruzados fechou? 😜</p><p>Se você ficou até aqui, obrigado. Investi um bom tempo escrevendo tudo isso, pois algumas pessoas me chamam no privado perguntando <strong>o que eu estudo/estudei</strong> e <strong>com o que eu trabalho</strong> etc. Então esse é um compiladão pra quem tiver essas dúvidas 😄</p><p>Grande abraço, e até mais!</p>]]></content:encoded>
            <category>jornada</category>
            <category>estudos</category>
            <category>tecnologias</category>
        </item>
        <item>
            <title><![CDATA[Como validar dados de uma forma elegante]]></title>
            <link>https://mrbrunelli.github.io/blog/como-validar-dados-de-uma-forma-elegante</link>
            <guid>como-validar-dados-de-uma-forma-elegante</guid>
            <pubDate>Mon, 21 Feb 2022 00:00:00 GMT</pubDate>
            <description><![CDATA[Hoje vou ensinar uma maneira bem elegante de validar dados no Javascript. E o mais legal, usando somente os recursos nativos da linguagem!]]></description>
            <content:encoded><![CDATA[<p>Salve galera, tudo bem com vocês?
Hoje vou ensinar uma maneira bem elegante de validar dados no Javascript. E o mais legal, usando somente os recursos nativos da linguagem!</p><h2 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="entendendo-o-cenário">Entendendo o cenário<a class="hash-link" href="#entendendo-o-cenário" title="Link direto para o título">​</a></h2><p>Imagine o seguinte cenário, você precisa construir uma API que irá receber os dados de pessoas que querem receber notificações regulares sobre seu catálogo de produtos.</p><h3 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="requisitos">Requisitos<a class="hash-link" href="#requisitos" title="Link direto para o título">​</a></h3><p>Para sua regra de negócios funcionar, você irá precisar dos seguintes requisitos:</p><ul><li>Sua API deve ser construída da forma mais simples possível, se possível uma <a href="https://aws.amazon.com/pt/lambda/" target="_blank" rel="noopener noreferrer">Lambda</a>.</li><li>A rota deve ser do tipo POST.</li><li>Receber do cliente nome, sobrenome, email e o cep.</li><li>Todos os dados são obrigatórios.</li></ul><h2 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="implementação-do-endpoint">Implementação do endpoint<a class="hash-link" href="#implementação-do-endpoint" title="Link direto para o título">​</a></h2><p>Vamos pular toda a parte da construção da API. Vamos prosseguir como se toda a infraestrutura já estivesse montada. Algo mais ou menos assim:</p><div class="codeBlockContainer_I0IT language-js theme-code-block"><div style="color:#393A34;background-color:#f6f8fa" class="codeBlockTitle_BvAR">subscribers.js</div><div class="codeBlockContent_wNvx js"><pre tabindex="0" class="prism-code language-js codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">exports</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method-variable function-variable method function property-access" style="color:#d73a49">subscribers</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">async</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">req</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> res</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#00009f">try</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> first_name</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> last_name</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> email</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> cep </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> red</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">body</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#00009f">await</span><span class="token plain"> subscribersRepository</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">insert</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      first_name</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      last_name</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      email</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      cep</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> res</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">status</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">200</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">json</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token literal-property property" style="color:#36acaa">message</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string" style="color:#e3116c">"Obrigado por assinar nosso catálogo! Em breve enviaremos a edição desse mês por e-mail."</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:#00009f">catch</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">error</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> res</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">status</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">400</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">json</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token literal-property property" style="color:#36acaa">message</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> error</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">message</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><button type="button" aria-label="Copiar código para a área de transferência" class="copyButton_wuS7 clean-btn">Copiar</button></div></div><p>Lembra que eu disse que os dados do cliente devem ser obrigatórios? Em nenhum momento nós estamos validando isso. Da maneira como os dados estão vindo, estou repassando para meu repository.</p><h2 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="possibilidades">Possibilidades<a class="hash-link" href="#possibilidades" title="Link direto para o título">​</a></h2><h3 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="condicionais-if-else">Condicionais: <code>if else</code><a class="hash-link" href="#condicionais-if-else" title="Link direto para o título">​</a></h3><p>A maneira mais simples de satisfazer nossa validação é criar um <code>if</code> para cada campo e lançar uma exceção caso algum retorne <code>false</code>.</p><h3 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="loops-padrões-for">Loops padrões: <code>for</code><a class="hash-link" href="#loops-padrões-for" title="Link direto para o título">​</a></h3><p>Outra maneira é criar um <code>for</code> e percorrer o <code>req.body</code> com o <code>Object.keys</code> e verificar campo a campo.</p><h3 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="conhecendo-o-every">Conhecendo o <code>every</code><a class="hash-link" href="#conhecendo-o-every" title="Link direto para o título">​</a></h3><p>Mas nosso querido Javascript já possuí um maravilhoso recurso que fará todo trabalho pesado para nós, e tudo isso de forma nativa, sem precisarmos instalar um pacote externo.</p><p>O <a href="https://developer.mozilla.org/pt-BR/docs/Web/JavaScript/Reference/Global_Objects/Array/every" target="_blank" rel="noopener noreferrer">every</a> é um método que itera nosso array e retorna <code>true</code> somente se todos os índices retornarem <code>true</code>. Com ele é possível percorrer nosso <code>req.body</code>, e caso não tenha um determinado campo, automagicamente retornará <code>false</code>, interrompendo dessa forma a iteração.</p><p>Vamos ver como ficará:</p><div class="codeBlockContainer_I0IT language-js theme-code-block"><div style="color:#393A34;background-color:#f6f8fa" class="codeBlockTitle_BvAR">subscribersValidator.js</div><div class="codeBlockContent_wNvx js"><pre tabindex="0" class="prism-code language-js codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">class</span><span class="token plain"> </span><span class="token class-name">SubscriberValidator</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">static</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">isValid</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">data </span><span class="token parameter operator" style="color:#393A34">=</span><span class="token parameter"> </span><span class="token parameter punctuation" style="color:#393A34">{</span><span class="token parameter punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> requiredFields </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">"first_name"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"last_name"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"email"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"cep"</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> requiredFields</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">every</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">field</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> data</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">hasOwnProperty</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">field</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><button type="button" aria-label="Copiar código para a área de transferência" class="copyButton_wuS7 clean-btn">Copiar</button></div></div><p>Note que para cada campo iterado do nosso <code>requiredFields</code>, testamos com o <a href="https://developer.mozilla.org/pt-BR/docs/Web/JavaScript/Reference/Global_Objects/Object/HasOwnProperty" target="_blank" rel="noopener noreferrer">hasOwnProperty</a> se <code>field</code> está presente no objeto <code>data</code>.</p><h2 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="implementando-o-nosso-validador">Implementando o nosso validador<a class="hash-link" href="#implementando-o-nosso-validador" title="Link direto para o título">​</a></h2><p>Voltemos ao código do nosso endpoint, agora com nosso <code>SubscriberValidator</code>.</p><div class="codeBlockContainer_I0IT language-js theme-code-block"><div style="color:#393A34;background-color:#f6f8fa" class="codeBlockTitle_BvAR">subscribers.js</div><div class="codeBlockContent_wNvx js"><pre tabindex="0" class="prism-code language-js codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token maybe-class-name">SubscriberValidator</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">require</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"./validators/subscriber-validator"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">exports</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method-variable function-variable method function property-access" style="color:#d73a49">subscribers</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">async</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">req</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> res</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#00009f">try</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:#393A34">!</span><span class="token maybe-class-name">SubscriberValidator</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">isValid</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">req</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">body</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token keyword control-flow" style="color:#00009f">throw</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">Error</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"Favor preencher todos os campos."</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> first_name</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> last_name</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> email</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> cep </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> red</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">body</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#00009f">await</span><span class="token plain"> subscribersRepository</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">insert</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      first_name</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      last_name</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      email</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      cep</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> res</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">status</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">200</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">json</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token literal-property property" style="color:#36acaa">message</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string" style="color:#e3116c">"Obrigado por assinar nosso catálogo! Em breve enviaremos a edição desse mês por e-mail."</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:#00009f">catch</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">error</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> res</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">status</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">400</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">json</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token literal-property property" style="color:#36acaa">message</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> error</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">message</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><button type="button" aria-label="Copiar código para a área de transferência" class="copyButton_wuS7 clean-btn">Copiar</button></div></div><p>Veja como ficou enxuta nossa feature. E o melhor é que o <code>every</code> interrompe imediatamente o loop e retorna <code>false</code> caso algum campo não esteja lá no <code>req.body</code>.</p><h3 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="bônus">Bônus<a class="hash-link" href="#bônus" title="Link direto para o título">​</a></h3><p>Podemos refatorar nosso <code>SubscriberValidator</code> e retornar o campo que o usuário esqueceu de informar:</p><div class="codeBlockContainer_I0IT language-js theme-code-block"><div style="color:#393A34;background-color:#f6f8fa" class="codeBlockTitle_BvAR">subscribersValidator.js</div><div class="codeBlockContent_wNvx js"><pre tabindex="0" class="prism-code language-js codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">class</span><span class="token plain"> </span><span class="token class-name">SubscriberValidator</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">static</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">isValid</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">data </span><span class="token parameter operator" style="color:#393A34">=</span><span class="token parameter"> </span><span class="token parameter punctuation" style="color:#393A34">{</span><span class="token parameter punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> requiredFields </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">"first_name"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"last_name"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"email"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"cep"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"phone"</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">let</span><span class="token plain"> missingField</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> isValid </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> requiredFields</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">every</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">field</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> hasField </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> data</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">hasOwnProperty</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">field</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token keyword control-flow" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:#393A34">!</span><span class="token plain">hasField</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> missingField </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> field</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> hasField</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      isValid</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      missingField</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><button type="button" aria-label="Copiar código para a área de transferência" class="copyButton_wuS7 clean-btn">Copiar</button></div></div><p>Podemos refatorar nosso endpoint e retornar o campo que está faltando na <code>response</code>. Dessa forma o usuário saberá onde errou:</p><div class="codeBlockContainer_I0IT language-js theme-code-block"><div style="color:#393A34;background-color:#f6f8fa" class="codeBlockTitle_BvAR">subscribers.js</div><div class="codeBlockContent_wNvx js"><pre tabindex="0" class="prism-code language-js codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token maybe-class-name">SubscriberValidator</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">require</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"./validators/subscriber-validator"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">exports</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method-variable function-variable method function property-access" style="color:#d73a49">subscribers</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">async</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">req</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> res</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#00009f">try</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> isValid</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> missingField </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token maybe-class-name">SubscriberValidator</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">isValid</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">req</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">body</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:#393A34">!</span><span class="token plain">isValid</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token keyword control-flow" style="color:#00009f">throw</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">Error</span><span class="token punctuation" style="color:#393A34">(</span><span class="token template-string template-punctuation string" style="color:#e3116c">`</span><span class="token template-string string" style="color:#e3116c">O campo '</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:#393A34">${</span><span class="token template-string interpolation">missingField</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:#393A34">}</span><span class="token template-string string" style="color:#e3116c">' é obrigatório!</span><span class="token template-string template-punctuation string" style="color:#e3116c">`</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> first_name</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> last_name</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> email</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> cep </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> red</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">body</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#00009f">await</span><span class="token plain"> subscribersRepository</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">insert</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      first_name</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      last_name</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      email</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      cep</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> res</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">status</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">200</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">json</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token literal-property property" style="color:#36acaa">message</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string" style="color:#e3116c">"Obrigado por assinar nosso catálogo! Em breve enviaremos a edição desse mês por e-mail."</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:#00009f">catch</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">error</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> res</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">status</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">400</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">json</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token literal-property property" style="color:#36acaa">message</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> error</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">message</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><button type="button" aria-label="Copiar código para a área de transferência" class="copyButton_wuS7 clean-btn">Copiar</button></div></div><h2 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="conclusão">Conclusão<a class="hash-link" href="#conclusão" title="Link direto para o título">​</a></h2><p>Utilizamos somente recursos nativos da nossa linguagem e evitamos pacotes externos desnecessários.</p><p>Caso sua API precisasse de muitas validações, gravação de logs, mensagens super refinadas, ai sim seria melhor utilizar um pacote para fazer esse trabalho.</p><p>Mas aqui era algo extremamente simples. O arroz com feijão já serviu!</p><p>Espero que tenha gostado! Compartilhe essa postagem com seus amigos e colegas de trabalho! Vou ficando por aqui, até a próxima!</p>]]></content:encoded>
            <category>validador</category>
            <category>javascript</category>
            <category>every</category>
        </item>
        <item>
            <title><![CDATA[Aprenda a criar snippets no VS Code]]></title>
            <link>https://mrbrunelli.github.io/blog/aprenda-a-criar-snippets-no-vscode</link>
            <guid>aprenda-a-criar-snippets-no-vscode</guid>
            <pubDate>Sun, 20 Feb 2022 00:00:00 GMT</pubDate>
            <description><![CDATA[Hoje quero compartilhar com vocês algo bem bacana, que é criar seus próprios snippets no VS Code...]]></description>
            <content:encoded><![CDATA[<p>Salve galera, tudo bem?</p><p>Hoje quero compartilhar com vocês algo bem bacana, que é criar seus próprios snippets no VS Code.</p><h2 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="o-que-é-um-snippet">O que é um Snippet?<a class="hash-link" href="#o-que-é-um-snippet" title="Link direto para o título">​</a></h2><h3 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="um-atalho">Um atalho<a class="hash-link" href="#um-atalho" title="Link direto para o título">​</a></h3><p>Nada mais é que um atalho para a criação de um trecho de código. Pense em um código simples como esse:</p><div class="codeBlockContainer_I0IT language-js theme-code-block"><div style="color:#393A34;background-color:#f6f8fa" class="codeBlockTitle_BvAR">Lógica de um loop no Javascript</div><div class="codeBlockContent_wNvx js"><pre tabindex="0" class="prism-code language-js codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token keyword control-flow" style="color:#00009f">for</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> item </span><span class="token keyword" style="color:#00009f">of</span><span class="token plain"> items</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token console class-name">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">item</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><button type="button" aria-label="Copiar código para a área de transferência" class="copyButton_wuS7 clean-btn">Copiar</button></div></div><p>Esse tipo de código tende a se repetir muito durante nosso desenvolvimento rotineiro. Com isso, pode ficar chato escrever a mesma sintaxe toda vez.</p><h3 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="produtividade">Produtividade<a class="hash-link" href="#produtividade" title="Link direto para o título">​</a></h3><p>É ai que a mágica acontece! Que tal digitiar apenas <code>newfor</code> e o VS Code criá-lo para você? Sim é possível!</p><h2 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="vamos-começar">Vamos começar<a class="hash-link" href="#vamos-começar" title="Link direto para o título">​</a></h2><h3 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="primeiro-passo">Primeiro passo<a class="hash-link" href="#primeiro-passo" title="Link direto para o título">​</a></h3><p>Vamos criar o arquivo principal para nossos snippets.</p><p>Com seu VS Code aberto, digite <kbd>Ctrl</kbd>+<kbd>Shift</kbd>+<kbd>P</kbd> e digite <strong>snippets</strong> na barra que apareceu, selecione a opção <strong>Preferences: Configure User Snippets</strong> e depois <strong>New Global Snippet File</strong>.</p><p>Abrirá uma caixinha para você digitar o nome do seu arquivo de snippets. Você pode colocar qualquer nome, eu vou colocar <strong>my-snippets</strong>.</p><h3 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="segundo-passo">Segundo passo<a class="hash-link" href="#segundo-passo" title="Link direto para o título">​</a></h3><p>Vai abrir um arquivo mais ou menos assim:</p><div class="codeBlockContainer_I0IT language-json theme-code-block"><div style="color:#393A34;background-color:#f6f8fa" class="codeBlockTitle_BvAR">my-snippets.code-snippets</div><div class="codeBlockContent_wNvx json"><pre tabindex="0" class="prism-code language-json codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// Place your global snippets here. Each snippet is defined under a snippet name and has a scope, prefix, body and</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// description. Add comma separated ids of the languages where the snippet is applicable in the scope field. If scope</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// is left empty or omitted, the snippet gets applied to all languages. The prefix is what is</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// used to trigger the snippet and the body will be expanded and inserted. Possible variables are:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// $1, $2 for tab stops, $0 for the final cursor position, and ${1:label}, ${2:another} for placeholders.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// Placeholders with the same ids are connected.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// Example:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// "Print to console": {</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">//    "scope": "javascript,typescript",</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">//    "prefix": "log",</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">//    "body": [</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">//        "console.log('$1');",</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">//        "$2"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">//    ],</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">//    "description": "Log output to console"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// }</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><button type="button" aria-label="Copiar código para a área de transferência" class="copyButton_wuS7 clean-btn">Copiar</button></div></div><p>Apague tudo e monte essa estrutura:</p><div class="codeBlockContainer_I0IT language-json theme-code-block"><div style="color:#393A34;background-color:#f6f8fa" class="codeBlockTitle_BvAR">my-snippets.code-snippets</div><div class="codeBlockContent_wNvx json"><pre tabindex="0" class="prism-code language-json codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">"newfor"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">"scope"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">""</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">"prefix"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">""</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">"body"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">"description"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">""</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><button type="button" aria-label="Copiar código para a área de transferência" class="copyButton_wuS7 clean-btn">Copiar</button></div></div><h4 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="significado-de-cada-atributo">Significado de cada atributo<a class="hash-link" href="#significado-de-cada-atributo" title="Link direto para o título">​</a></h4><ul><li><strong>newfor</strong>: é o nome do nosso snippet</li><li><strong>scope</strong>: em quais tipos de arquivos seu snippet executará</li><li><strong>prefix</strong>: atalho para seu snippet</li><li><strong>body</strong>: linhas que seu snippet irá gerar</li><li><strong>description</strong>: descrição do que seu snippet irá gerar (não obrigatório)</li></ul><h3 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="terceiro-passo">Terceiro passo<a class="hash-link" href="#terceiro-passo" title="Link direto para o título">​</a></h3><p>Agora que sabemos o que cada campo significa, vamos preenche-los com nosso código:</p><div class="codeBlockContainer_I0IT language-json theme-code-block"><div style="color:#393A34;background-color:#f6f8fa" class="codeBlockTitle_BvAR">my-snippets.code-snippets</div><div class="codeBlockContent_wNvx json"><pre tabindex="0" class="prism-code language-json codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">"newfor"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">"scope"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"javascript, typescript"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">"prefix"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"newfor"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">"body"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">"for (const item of items) {"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"console.log(item)"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"}"</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">"description"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"cria um loop com for"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><button type="button" aria-label="Copiar código para a área de transferência" class="copyButton_wuS7 clean-btn">Copiar</button></div></div><h3 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="quarto-passo">Quarto passo<a class="hash-link" href="#quarto-passo" title="Link direto para o título">​</a></h3><p>Pronto, salve o seu arquivo de snippet, vá para um arquivo <strong>.js</strong> ou <strong>.ts</strong> e faça o teste. Digite <code>newfor</code> e aperte <kbd>Ctrl</kbd>+ <kbd>Space bar</kbd>.</p><p>Deverá aparecer o nome do seu snippet no autocomplete, dessa forma:
<img src="/blog/assets/images/screenshot-7ad2bca9428a144f3f9b32757bc20f64.png" width="609" height="160"></p><p>Só apertar <kbd>Enter</kbd> que seu código será gerado. Legal né?</p><h2 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="conclusão">Conclusão<a class="hash-link" href="#conclusão" title="Link direto para o título">​</a></h2><p>Caso você tenha chegado até aqui e não tenha funcionado, volte desde o começo e tente novamente com calma, você deve ter deixado algo passar. É bem simples.</p><p>Espero que tenha gostado! Se foi útil para você, compartilhe com seus amigos e colegas de trabalho!</p><p>Até a próxima!</p>]]></content:encoded>
            <category>snippets</category>
            <category>vscode</category>
            <category>produtividade</category>
        </item>
        <item>
            <title><![CDATA[Criando atalhos para o git]]></title>
            <link>https://mrbrunelli.github.io/blog/criando-atalhos-para-o-git</link>
            <guid>criando-atalhos-para-o-git</guid>
            <pubDate>Sat, 19 Feb 2022 00:00:00 GMT</pubDate>
            <description><![CDATA[Hoje vou ensinar como criar atalhos para o git que vão aumentar tua produtividade. Sem muita enrolação, vamos direto para a prática...]]></description>
            <content:encoded><![CDATA[<p><img alt="Git Logo" src="/blog/assets/images/git-1f46a94b6c9349272b34d93d86a960f6.jpg" width="1397" height="353"></p><p>Olá, tudo bem?</p><p>Hoje vou ensinar como criar atalhos para o <strong>git</strong> que vão aumentar tua produtividade.
Sem muita enrolação, vamos direto para a prática.</p><h2 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="escolher-o-editor-de-textos-padrão">Escolher o editor de textos padrão<a class="hash-link" href="#escolher-o-editor-de-textos-padrão" title="Link direto para o título">​</a></h2><p>Antes de começar, é bom configurar o editor de texto de sua preferência. Eu vou utilizar o <a href="https://www.vim.org/" target="_blank" rel="noopener noreferrer">Vim</a>, mas você pode utilizar o Code, Nano etc.</p><h3 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="configurar-editor">Configurar editor<a class="hash-link" href="#configurar-editor" title="Link direto para o título">​</a></h3><p>Subistitua o <strong>"vim"</strong> pelo editor de sua preferencia. Segue a lista dos mais utilizados:</p><ul><li>vim</li><li>nano</li><li>code</li><li>gedit</li></ul><div class="codeBlockContainer_I0IT language-bash theme-code-block"><div style="color:#393A34;background-color:#f6f8fa" class="codeBlockTitle_BvAR">Definir editor padrão</div><div class="codeBlockContent_wNvx bash"><pre tabindex="0" class="prism-code language-bash codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">git</span><span class="token plain"> config --global core.editor </span><span class="token function" style="color:#d73a49">vim</span><br></span></code></pre><button type="button" aria-label="Copiar código para a área de transferência" class="copyButton_wuS7 clean-btn">Copiar</button></div></div><h2 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="prontos-para-começar">Prontos para começar<a class="hash-link" href="#prontos-para-começar" title="Link direto para o título">​</a></h2><h3 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="abrir-arquivo-de-configurações-do-git">Abrir arquivo de configurações do git<a class="hash-link" href="#abrir-arquivo-de-configurações-do-git" title="Link direto para o título">​</a></h3><p>Isso abritá seu arquivo de configurações do git em seu editor de texto.</p><div class="codeBlockContainer_I0IT language-bash theme-code-block"><div style="color:#393A34;background-color:#f6f8fa" class="codeBlockTitle_BvAR">Abrindo meu arquivo de configurações</div><div class="codeBlockContent_wNvx bash"><pre tabindex="0" class="prism-code language-bash codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">git</span><span class="token plain"> config --global --edit</span><br></span></code></pre><button type="button" aria-label="Copiar código para a área de transferência" class="copyButton_wuS7 clean-btn">Copiar</button></div></div><h3 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="adicionar-usuário">Adicionar usuário<a class="hash-link" href="#adicionar-usuário" title="Link direto para o título">​</a></h3><p>É importante adicionar um usuário ao seu git config, pois ele será utilizado em seus commits.</p><div class="codeBlockContainer_I0IT language-bash theme-code-block"><div style="color:#393A34;background-color:#f6f8fa" class="codeBlockTitle_BvAR">Configurando meu git</div><div class="codeBlockContent_wNvx bash"><pre tabindex="0" class="prism-code language-bash codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">user</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    email </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> meu_email@mail.com</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    name </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> nome_que_aparecera_nos_commits</span><br></span></code></pre><button type="button" aria-label="Copiar código para a área de transferência" class="copyButton_wuS7 clean-btn">Copiar</button></div></div><h2 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="atalhos">Atalhos<a class="hash-link" href="#atalhos" title="Link direto para o título">​</a></h2><h3 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="git-status">git status<a class="hash-link" href="#git-status" title="Link direto para o título">​</a></h3><p>Vamos definir nosso primeiro atalho, o <code>git status -s</code>. Esse comando exibe o status atual da sua <strong>stage area</strong>, quais arquivos estão commitados, e quais foram modificados.</p><div class="codeBlockContainer_I0IT language-bash theme-code-block"><div style="color:#393A34;background-color:#f6f8fa" class="codeBlockTitle_BvAR">Configurando meu git</div><div class="codeBlockContent_wNvx bash"><pre tabindex="0" class="prism-code language-bash codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">user</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    email </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> meu_email@mail.com</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    name </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> nome_que_aparecera_nos_commits</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">alias</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    s </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">!</span><span class="token plain">git status -s</span><br></span></code></pre><button type="button" aria-label="Copiar código para a área de transferência" class="copyButton_wuS7 clean-btn">Copiar</button></div></div><p>Agora o status dos seus commits ficarão mais clean.</p><h3 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="git-add--git-commit">git add &amp;&amp; git commit<a class="hash-link" href="#git-add--git-commit" title="Link direto para o título">​</a></h3><p>Esses dois são muito utilizados, que tal torná-los em um único comando?</p><div class="codeBlockContainer_I0IT language-bash theme-code-block"><div style="color:#393A34;background-color:#f6f8fa" class="codeBlockTitle_BvAR">Configurando meu git</div><div class="codeBlockContent_wNvx bash"><pre tabindex="0" class="prism-code language-bash codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">user</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    email </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> meu_email@mail.com</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    name </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> nome_que_aparecera_nos_commits</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">alias</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    s </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">!</span><span class="token plain">git status -s</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    c </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">!</span><span class="token plain">git </span><span class="token function" style="color:#d73a49">add</span><span class="token plain"> --all </span><span class="token operator" style="color:#393A34">&amp;&amp;</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">git</span><span class="token plain"> commit -m</span><br></span></code></pre><button type="button" aria-label="Copiar código para a área de transferência" class="copyButton_wuS7 clean-btn">Copiar</button></div></div><p>Agora quando digitarmos <code>git c</code> em nosso terminal, nosso <strong>alias</strong> irá adicionar e commitar ao mesmo tempo, só vamos precisar informar a mensagem. Exemplo:</p><div class="codeBlockContainer_I0IT language-bash theme-code-block"><div style="color:#393A34;background-color:#f6f8fa" class="codeBlockTitle_BvAR">Configurando meu git</div><div class="codeBlockContent_wNvx bash"><pre tabindex="0" class="prism-code language-bash codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">git</span><span class="token plain"> c </span><span class="token string" style="color:#e3116c">'feat: agora ficou mais fácil!'</span><br></span></code></pre><button type="button" aria-label="Copiar código para a área de transferência" class="copyButton_wuS7 clean-btn">Copiar</button></div></div><h3 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="git-pullpush-origin-head">git pull/push origin HEAD<a class="hash-link" href="#git-pullpush-origin-head" title="Link direto para o título">​</a></h3><p>Outro comando muito utilizado. Vamos simplificá-lo.</p><div class="codeBlockContainer_I0IT language-bash theme-code-block"><div style="color:#393A34;background-color:#f6f8fa" class="codeBlockTitle_BvAR">Configurando meu git</div><div class="codeBlockContent_wNvx bash"><pre tabindex="0" class="prism-code language-bash codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">user</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    email </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> meu_email@mail.com</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    name </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> nome_que_aparecera_nos_commits</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">alias</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    s </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">!</span><span class="token plain">git status -s</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    c </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">!</span><span class="token plain">git </span><span class="token function" style="color:#d73a49">add</span><span class="token plain"> --all </span><span class="token operator" style="color:#393A34">&amp;&amp;</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">git</span><span class="token plain"> commit -m</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    pullo </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">!</span><span class="token plain">git pull origin HEAD</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    pusho </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">!</span><span class="token plain">git push origin HEAD</span><br></span></code></pre><button type="button" aria-label="Copiar código para a área de transferência" class="copyButton_wuS7 clean-btn">Copiar</button></div></div><p>Agora podemos usar essa combinação:</p><div class="codeBlockContainer_I0IT language-bash theme-code-block"><div class="codeBlockContent_wNvx bash"><pre tabindex="0" class="prism-code language-bash codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">git</span><span class="token plain"> c </span><span class="token string" style="color:#e3116c">'feat: adicionar simplicidade'</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;&amp;</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">git</span><span class="token plain"> pusho</span><br></span></code></pre><button type="button" aria-label="Copiar código para a área de transferência" class="copyButton_wuS7 clean-btn">Copiar</button></div></div><h3 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="git-log">git log<a class="hash-link" href="#git-log" title="Link direto para o título">​</a></h3><p>Quem nunca se perdeu ao utilizar um <code>git log</code>? São muitas informações de uma vez. Vamos simplificar:</p><div class="codeBlockContainer_I0IT language-bash theme-code-block"><div style="color:#393A34;background-color:#f6f8fa" class="codeBlockTitle_BvAR">Configurando meu git</div><div class="codeBlockContent_wNvx bash"><pre tabindex="0" class="prism-code language-bash codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">user</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    email </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> meu_email@mail.com</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    name </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> nome_que_aparecera_nos_commits</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">alias</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    s </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">!</span><span class="token plain">git status -s</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    c </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">!</span><span class="token plain">git </span><span class="token function" style="color:#d73a49">add</span><span class="token plain"> --all </span><span class="token operator" style="color:#393A34">&amp;&amp;</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">git</span><span class="token plain"> commit -m</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    pullo </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">!</span><span class="token plain">git pull origin HEAD</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    pusho </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">!</span><span class="token plain">git push origin HEAD</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    l </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">!</span><span class="token plain">git log --pretty</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">format:</span><span class="token string" style="color:#e3116c">'%h %s %cn %cr'</span><br></span></code></pre><button type="button" aria-label="Copiar código para a área de transferência" class="copyButton_wuS7 clean-btn">Copiar</button></div></div><h4 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="vamos-entender-o-que-fizemos">Vamos entender o que fizemos<a class="hash-link" href="#vamos-entender-o-que-fizemos" title="Link direto para o título">​</a></h4><ul><li><strong>%h</strong>: id do commit (hash)</li><li><strong>%s</strong>: mensagem do commit</li><li><strong>%cn</strong>: autor do commit</li><li><strong>%cr</strong>: quanto tempo desde o commit</li></ul><p>Agora seu <code>git l</code> retornará os dados do commit de uma forma bem resumida. Também dá pra mudar a cor, vou deixar a documentação logo abaixo pra você consultar.</p><h2 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="links-úteis">Links úteis<a class="hash-link" href="#links-úteis" title="Link direto para o título">​</a></h2><ul><li><a href="https://git-scm.com/docs/pretty-formats" target="_blank" rel="noopener noreferrer">Pretty format</a></li><li><a href="https://git-scm.com/book/en/v2/Customizing-Git-Git-Configuration" target="_blank" rel="noopener noreferrer">Git config</a></li></ul><h2 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="conclusão">Conclusão<a class="hash-link" href="#conclusão" title="Link direto para o título">​</a></h2><p>Não existe limites, podemos combinar vários comandos e simplificar nossa rotina. Agora você pode brincar e criar seus próprios atalhos!</p><p>Espero que tenha gostado! Se te ajudou de alguma maneira, compartilhe com seus amigos e colegas de trabalho!</p><p>Até a próxima!</p>]]></content:encoded>
            <category>git</category>
            <category>aliases</category>
        </item>
        <item>
            <title><![CDATA[Como foi construir um validador de objetos?]]></title>
            <link>https://mrbrunelli.github.io/blog/como-foi-construir-um-validador-de-objetos</link>
            <guid>como-foi-construir-um-validador-de-objetos</guid>
            <pubDate>Thu, 17 Feb 2022 00:00:00 GMT</pubDate>
            <description><![CDATA[Primeiramente, por que contruí um pacote de validar objetos, sendo que o npm está cheio deles...]]></description>
            <content:encoded><![CDATA[<p><img alt="Logo NPM" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAhwAAADSAgMAAAB87fECAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAACVBMVEUAAADLODf///8EXxL6AAAAAXRSTlMAQObYZgAAAAFiS0dEAmYLfGQAAAAHdElNRQfhCAkCAi0o2YxVAAAAwElEQVR42u3asRGAIAxAURr3s7FxPxumtLHihMt5QS3er0PyBqBs/6hwcHBwcHBwcHBwcHBwcHCkO/Y66rimhkM1tKqzmYODg4ODg4ODg4ODg4ODY7qjOdxxNG+frOLg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4OCY7Aj9M+Dg4ODg4ODg4ODg4ODg4PjKEev+cEYcHBwcHBwcHBwcHBwcHByJjlDLcMda3oqDg4ODg4ODg4ODg4ODgyPSCV7wh+HNgMmcAAAAJXRFWHRkYXRlOmNyZWF0ZQAyMDE3LTA4LTA5VDAyOjAyOjQ0KzAwOjAw39Y9SwAAACV0RVh0ZGF0ZTptb2RpZnkAMjAxNy0wOC0wOVQwMjowMjo0NCswMDowMK6LhfcAAAAASUVORK5CYII=" width="540" height="210"></p><p>Eai galera, tudo bem com vocês? Espero que sim.
Hoje gostaria de compartilhar como <strong>criei meu primeiro pacote npm</strong>, quais foram minhas motivações e as etapas desde a ideia até o publish.</p><p>Primeiramente, por que contruí um pacote de <strong>validar objetos</strong>, sendo que o npm <strong>está cheio deles?</strong>
Bem, essa decisão foi um pouco difícil, visto que já existe um validador de schemas muito famoso na comunidade, o famigerado <a href="https://www.npmjs.com/package/yup" target="_blank" rel="noopener noreferrer"><strong>Yup</strong></a>.</p><h2 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="vamos-às-motivações">Vamos às motivações<a class="hash-link" href="#vamos-às-motivações" title="Link direto para o título">​</a></h2><h3 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="primeira">Primeira<a class="hash-link" href="#primeira" title="Link direto para o título">​</a></h3><p>Eu sempre quis <strong>criar um pacote npm que não fosse inútil</strong>, mas nunca tinha a oportunidade ou <strong>criatividade</strong> para tal.</p><h3 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="segunda">Segunda<a class="hash-link" href="#segunda" title="Link direto para o título">​</a></h3><p>Acontece que, durante o trabalho surgiu uma dificuldade de validar alguns campos que a API de um ERP retornava, devido a sua volatilidade.
Algo mais ou menos assim:</p><div class="codeBlockContainer_I0IT language-json theme-code-block"><div style="color:#393A34;background-color:#f6f8fa" class="codeBlockTitle_BvAR">Response do ERP</div><div class="codeBlockContent_wNvx json"><pre tabindex="0" class="prism-code language-json codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">"serviceName"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"CRUDServiceProvider.loadRecords"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">"status"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"1"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">"pendingPrinting"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"false"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">"transactionId"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"6BB89D3B72BEDCE69E51C5698DF3BB23"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">"responseBody"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">"entities"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">"total"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"0"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">"hasMoreResult"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"false"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">"offsetPage"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"0"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">"offset"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"0"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">"metadata"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token property" style="color:#36acaa">"fields"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token property" style="color:#36acaa">"field"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token property" style="color:#36acaa">"name"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"NUNOTA"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><button type="button" aria-label="Copiar código para a área de transferência" class="copyButton_wuS7 clean-btn">Copiar</button></div></div><p>Tá, qual o problema desse retorno? Parece um retorno normal de uma API normal, mas não! A API não retorna status code 40x quando alguma request falha por algum motivo. Ela sempre retorna 200, mas com alguns campos diferentes. Por exemplo:</p><ul><li>Quando a ação não é executada por completo, <strong>o campo "status" retorna "0"</strong>.</li><li>Quando a ação é executada mas não retorna dados, <strong>o campo "status" retorna "1"</strong>, mas <strong>o campo "total" retorna "0"</strong>.</li><li>Alguns endpoints retornam <strong>o campo "responseBody.entities</strong>", outros "<strong>responseBody.fieldsMetaData"</strong>, e consequentemente, toda a árvore de objetos é alterada.</li></ul><div class="codeBlockContainer_I0IT language-json theme-code-block"><div style="color:#393A34;background-color:#f6f8fa" class="codeBlockTitle_BvAR">Response de outro endpoint do mesmo ERP</div><div class="codeBlockContent_wNvx json"><pre tabindex="0" class="prism-code language-json codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">"serviceName"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"DbExplorerSP.executeQuery"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">"status"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"0"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">"pendingPrinting"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"false"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">"transactionId"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"1BFB4FBFB934D9BE62BD06D5412C5A19"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">"tsError"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">"tsErrorCode"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"CORE_E03690"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">"tsErrorLevel"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"ERROR"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">"statusMessage"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"Permitido apenas a execu��o de consultas, a instru��o possui 'UPDATE', 'DELETE' ou 'INSERT' e tais comandos n�o s�o permitidos."</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><button type="button" aria-label="Copiar código para a área de transferência" class="copyButton_wuS7 clean-btn">Copiar</button></div></div><p>Veja que não tem um padrão, <strong>pois dessa vez retornou "status" "0" com um campo novo "statusMessage"</strong>, porém o status code da requisição é 200, de sucesso.</p><h3 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="terceira">Terceira<a class="hash-link" href="#terceira" title="Link direto para o título">​</a></h3><p>Como o servidor onde o código fonte estava só suportava Node versão 12, algumas features como <strong>optional chaining</strong> não estavam disponíveis. Dessa forma tive que validar o retorno da API de uma forma muito verbosa:</p><div class="codeBlockContainer_I0IT language-js theme-code-block"><div style="color:#393A34;background-color:#f6f8fa" class="codeBlockTitle_BvAR">Validação da response</div><div class="codeBlockContent_wNvx js"><pre tabindex="0" class="prism-code language-js codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> hasERPSuccessResponse </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  response </span><span class="token operator" style="color:#393A34">&amp;&amp;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  response</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">status</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">===</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">200</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;&amp;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  response</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">data</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;&amp;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  response</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">data</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">status</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">===</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"1"</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;&amp;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  response</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">data</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">responseBody</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;&amp;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  response</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">data</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">responseBody</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">entities</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;&amp;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  response</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">data</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">responseBody</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">entities</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">total</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">!==</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"0"</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword control-flow" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">hasERPSuccessResponse</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// prossegue...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><button type="button" aria-label="Copiar código para a área de transferência" class="copyButton_wuS7 clean-btn">Copiar</button></div></div><h3 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="quarta">Quarta<a class="hash-link" href="#quarta" title="Link direto para o título">​</a></h3><p>Ficar toda hora fazendo as mesmas validações fez com que eu me sentisse um perfeito idiota</p><p>Então comecei a pensar em como eu poderia abstrair esse tipo de validação, mas sem precisar ficar mapeando todas as combinações possíveis da resposta.
Eu queria continuar fazendo o "if", da maneira como faria com o <strong>optional chaining</strong>.</p><div class="codeBlockContainer_I0IT language-js theme-code-block"><div style="color:#393A34;background-color:#f6f8fa" class="codeBlockTitle_BvAR">Como seria a validação no Node 14+</div><div class="codeBlockContent_wNvx js"><pre tabindex="0" class="prism-code language-js codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> hasERPSuccessResponse </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  response</span><span class="token operator" style="color:#393A34">?.</span><span class="token plain">status </span><span class="token operator" style="color:#393A34">===</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">200</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;&amp;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  response</span><span class="token operator" style="color:#393A34">?.</span><span class="token plain">data</span><span class="token operator" style="color:#393A34">?.</span><span class="token plain">status </span><span class="token operator" style="color:#393A34">===</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"1"</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;&amp;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  response</span><span class="token operator" style="color:#393A34">?.</span><span class="token plain">data</span><span class="token operator" style="color:#393A34">?.</span><span class="token plain">responseBody</span><span class="token operator" style="color:#393A34">?.</span><span class="token plain">entities</span><span class="token operator" style="color:#393A34">?.</span><span class="token plain">total </span><span class="token operator" style="color:#393A34">!==</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"0"</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><button type="button" aria-label="Copiar código para a área de transferência" class="copyButton_wuS7 clean-btn">Copiar</button></div></div><h2 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="arquitetando-a-solução-em-etapas">Arquitetando a solução em etapas<a class="hash-link" href="#arquitetando-a-solução-em-etapas" title="Link direto para o título">​</a></h2><h3 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="primeira-1">Primeira<a class="hash-link" href="#primeira-1" title="Link direto para o título">​</a></h3><p>Pensei, preciso criar uma função que:</p><ul><li>Receba o objeto a ser validado.</li><li>Receba os campos a serem procurados no objeto.</li><li>Deve validar independente do formato de objeto fornecido.</li><li>Deve validar chave e valor.</li><li>Deve permitir validar campos com nomes iguais, mas em localizações diferentes.</li><li>Deve retornar apenas booleano, nada de exceções ou mensagens.</li></ul><p>Imaginei algo mais ou menos com esse design:</p><div class="codeBlockContainer_I0IT language-js theme-code-block"><div style="color:#393A34;background-color:#f6f8fa" class="codeBlockTitle_BvAR">Validador de objetos</div><div class="codeBlockContent_wNvx js"><pre tabindex="0" class="prism-code language-js codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> isValid </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">objectValidator</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">response</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token string" style="color:#e3116c">"status"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token string" style="color:#e3116c">"response.data.status"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token string" style="color:#e3116c">"response.data.responseBody.entities"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword control-flow" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">isValid</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// prossegue...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><button type="button" aria-label="Copiar código para a área de transferência" class="copyButton_wuS7 clean-btn">Copiar</button></div></div><p>Do jeito que montei já estava legal, mas eu precisava validar os valores dos campos também, e então começou a ficar complexo. Comecei a imaginar vários cenários onde minha função quebraria, e comecei a desanimar.</p><h3 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="segunda-1">Segunda<a class="hash-link" href="#segunda-1" title="Link direto para o título">​</a></h3><p>Como estou estudando muito sobre <strong>TDD</strong>, resolvi escrever todos os cenários possíveis no teste, antes mesmo de começar a programar uma linha de código.
Me lembro que quando comecei, o arquivo de testes estava mais ou menos assim:</p><div class="codeBlockContainer_I0IT language-js theme-code-block"><div style="color:#393A34;background-color:#f6f8fa" class="codeBlockTitle_BvAR">objectValidator.test.js</div><div class="codeBlockContent_wNvx js"><pre tabindex="0" class="prism-code language-js codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">describe</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"objectValidator"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  test</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">todo</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"deve chamar a função com um objeto no primeiro parâmetro"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  test</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">todo</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"deve chamar a função com um array de campos no segundo parâmetro"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  test</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">todo</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"deve retornar falso se algum campo for fornecido incorretamente"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  test</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">todo</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">"deve retornar falso se um dos campos fornecidos não forem encontrado no objeto"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// ...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><button type="button" aria-label="Copiar código para a área de transferência" class="copyButton_wuS7 clean-btn">Copiar</button></div></div><h3 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="terceira-1">Terceira<a class="hash-link" href="#terceira-1" title="Link direto para o título">​</a></h3><p>O TDD me ensinou a resolver um problema por vez</p><p>Seguindo esse modelo, coloquei todos os possíveis cenários em <strong>TODOS</strong>, e fui implementando um a um.
Já era de noite quando completei meus <strong>TODOS</strong>, e minha função estava totalmente funcional, e muito performática.</p><p>Comecei a criar cenários totalmente caóticos, fornecendo várias vezes os mesmos campos, deixando de informar valores em alguns, e BOOM! <strong>O algoritmo continuou funcionando perfeitamente!</strong></p><p>Nem acreditei que consegui criar algo tão útil em tão pouco tempo. Na manhã seguinte, um sábado muito agradável, resolvi criar uma conta no NPM e publicar a primeira versão funcional. Utilizei o CI do GitHub para garantir que tudo que chegasse à branch <strong>main</strong> estivesse de fato testado.</p><h2 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="surpresa-total">Surpresa total<a class="hash-link" href="#surpresa-total" title="Link direto para o título">​</a></h2><p>Domingo de manhã meu pacote já estava com mais de 100 downloads, senti uma euforia tão grande! Meu repositório no GitHub havia sido clonado mais de 50x e visitado por dezenas de pessoas diferentes.
Algo tão simples, passou a ajudar um punhado de pessoas, que <strong>preferiram utilizar meu pacote de 6kb</strong> ao invés do Yup, que contém <strong>inúmeras funcionalidades</strong>.</p><p>Essa foi uma grande experiência pra mim, e de agora em diante, sempre que eu criar algo útil, irei publicar para que outras pessoas também possam utilizar.</p><h2 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="tá-mas-como-ficou-a-implementação">Tá, mas como ficou a implementação?<a class="hash-link" href="#tá-mas-como-ficou-a-implementação" title="Link direto para o título">​</a></h2><p>Vou deixar o repo aqui em baixo. Migrei tudo pra Typescript quando tive mais tempo e gerei os arquivos d.ts, pra garantir tipagens para quem está utilizando no Javascript.</p><ul><li><a href="https://github.com/mrbrunelli/object-validator" target="_blank" rel="noopener noreferrer"><strong>Repo GitHub</strong></a></li><li><a href="https://www.npmjs.com/package/@mrbrunelli/object-validator" target="_blank" rel="noopener noreferrer"><strong>Link do NPM</strong></a></li></ul><p>Por hoje é isso, espero que tenha gostado da pequena história, até a próxima!</p>]]></content:encoded>
            <category>npm</category>
            <category>pacote npm</category>
            <category>validator</category>
            <category>validador de objetos</category>
        </item>
        <item>
            <title><![CDATA[Como contornar a dor de escrever um teste unitário?]]></title>
            <link>https://mrbrunelli.github.io/blog/como-contornar-a-dor-de-escrever-um-teste-unitário</link>
            <guid>como-contornar-a-dor-de-escrever-um-teste-unitário</guid>
            <pubDate>Thu, 16 Dec 2021 00:00:00 GMT</pubDate>
            <description><![CDATA[Acredito que todo mundo concorda que um código sem testes, é um código instável e frágil à mudanças...]]></description>
            <content:encoded><![CDATA[<p><img alt="TDD Banner" src="/blog/assets/images/tdd-fbd2a93ec4b76fcef18c1b3a10e68bbf.jpeg" width="535" height="311"></p><p>Salve galera, tudo tranquilo? Esse é meu segundo artigo, e gostaria de compartilhar algo que vem me ajudando muito durante o desenvolvimento de software e na minha própria evolução profissional.</p><p>Estou falando sobre os <strong>testes unitários</strong>. Acredito que todo mundo concorda que um código sem testes, é um código instável e frágil à mudanças. É muito ruim programar no escuro, nós nunca temos certeza que o que estamos desenvolvendo irá funcionar em produção, sem conflitar com as features já existentes.</p><p>Por outro lado, escrever testes para uma feature já implementada pode ser algo muito doloroso, por isso <strong>muita gente prefere correr o risco e deixar o código sem cobertura.</strong></p><p>Mas recentemente venho estudando fortemente uma metodologia que abriu minha mente, o <strong>TDD</strong>, ou em português <strong>"Desenvolvimento guiado por testes"</strong>. No TDD nós criamos o teste primeiro, e só depois criamos a implementação de fato, que fará o teste passar. Isso faz com que nosso código sempre esteja coberto por testes.</p><h2 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="traduzindo">Traduzindo<a class="hash-link" href="#traduzindo" title="Link direto para o título">​</a></h2><p>Se eu quisesse criar uma função que me retornasse o maior número de uma lista em Javascript, utilizando o <strong>TDD</strong> (escrevendo o teste primeiro), eu começaria fazendo algo mais ou menos assim:</p><div class="codeBlockContainer_I0IT language-js theme-code-block"><div class="codeBlockContent_wNvx js"><pre tabindex="0" class="prism-code language-js codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// Arquivo: pegueOMaiorNumero.test.js</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// Sintaxe de um framework de testes do Javascript</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">describe</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"pegueOMaiorNumero"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#d73a49">test</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"deve retornar o maior número de uma lista"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> maiorNumero </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">pegueOMaiorNumero</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">9</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">7</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">15</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">21</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">10</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">expect</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">maiorNumero</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">toBe</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">21</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><button type="button" aria-label="Copiar código para a área de transferência" class="copyButton_wuS7 clean-btn">Copiar</button></div></div><p>Nesse caso, eu forneci uma lista com alguns números, onde o 21 é o maior deles. Mas note que em nenhum momento foi criada a função <strong>pegueOMaiorNumero</strong>. Estou invocando uma função que <strong>ainda não foi criada</strong>, e ainda estou esperando que o resultado seja 21. Nesse caso o teste irá falhar.</p><p>É ai que a brincadeira começa. Quando o teste falha, é sinal de que precisamos implementar a feature que faça esse teste passar.</p><h2 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="então-vamos-lá">Então vamos lá!<a class="hash-link" href="#então-vamos-lá" title="Link direto para o título">​</a></h2><p>Vou criar a função que fará o teste passar:</p><div class="codeBlockContainer_I0IT language-js theme-code-block"><div class="codeBlockContent_wNvx js"><pre tabindex="0" class="prism-code language-js codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// Arquivo: pegueOMaiorNumero.test.js</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token function-variable function" style="color:#d73a49">pegueOMaiorNumero</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">numeros</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">let</span><span class="token plain"> maior </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#00009f">for</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">let</span><span class="token plain"> i </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> i </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain"> numeros</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">length</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> i</span><span class="token operator" style="color:#393A34">++</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">numeros</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">i</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> maior</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      maior </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> numeros</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">i</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> maior</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">describe</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"pegueOMaiorNumero"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#d73a49">test</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"deve retornar o maior número de uma lista"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> maiorNumero </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">pegueOMaiorNumero</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">9</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">7</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">15</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">21</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">10</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">expect</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">maiorNumero</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">toBe</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">21</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><button type="button" aria-label="Copiar código para a área de transferência" class="copyButton_wuS7 clean-btn">Copiar</button></div></div><p>Agora o teste começará a passar. Veja que o algoritmo não ficou dos melhores, mas conseguiu satisfazer o que o teste pediu. Agora que o teste está passando, posso refatorar a função <strong>pegueOMaiorNumero</strong> sem medo, pois ela está coberta por um teste. Caso a função passe a retornar uma string, null, ou um número que não seja o maior, <strong>o teste irá me avisar, reprovando</strong>.</p><h2 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="vamos-refatorar-sem-medo">Vamos refatorar, sem medo!<a class="hash-link" href="#vamos-refatorar-sem-medo" title="Link direto para o título">​</a></h2><div class="codeBlockContainer_I0IT language-js theme-code-block"><div class="codeBlockContent_wNvx js"><pre tabindex="0" class="prism-code language-js codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// Arquivo: pegueOMaiorNumero.test.js</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token function-variable function" style="color:#d73a49">pegueOMaiorNumero</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">numeros</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> </span><span class="token known-class-name class-name">Math</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">max</span><span class="token punctuation" style="color:#393A34">(</span><span class="token spread operator" style="color:#393A34">...</span><span class="token plain">numeros</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">describe</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"pegueOMaiorNumero"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#d73a49">test</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"deve retornar o maior número de uma lista"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> maiorNumero </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">pegueOMaiorNumero</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">9</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">7</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">15</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">21</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">10</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">expect</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">maiorNumero</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">toBe</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">21</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><button type="button" aria-label="Copiar código para a área de transferência" class="copyButton_wuS7 clean-btn">Copiar</button></div></div><p>Pronto, se a gente rodar esse teste, ele irá continuar passando, pois o <strong>Math.max</strong> está fazendo o mesmo que o <strong>laço de repetição</strong> estava fazendo anteriormente, mas de uma maneira mais enxuta. O fato é que, temos confiança de alterar um código que nos fale se a nossa regra de negócios falhou. <strong>É inadmissível</strong> que nossa função <strong>pegueOMariorNumero</strong> retorne um número que não é o maior.</p><h2 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="conclusão">Conclusão<a class="hash-link" href="#conclusão" title="Link direto para o título">​</a></h2><p>Nossa simples feature de retornar o maior número, <strong>esteve durante todo o tempo de desenvolvimento coberta por um teste</strong>. Se a gente fizesse a feature primeiro ao invés do teste, teríamos que testá-la manualmente a cada alteração, printando o resultado no console, até de fato escrever um teste pra ela. Isso seria <strong>cansativo</strong>. O teste é automatizado, ou seja, escrevemos uma única vez, e ele sempre irá assegurar o resultado pra gente.</p><p>Escolhi esse exemplo de algoritmo, pois há várias formas de implementá-lo. Caso você descubra alguma forma mais enxuta que essa apresentada, poderá implementar sem correr o risco de quebrar sua aplicação.</p><p>Como material complementar, recomendo essa live que aconteceu no dia 09/12/2021, e que considero excepcional por <strong>dois motivos: não tem enrolação, e os caras sabem o que estão ensinando.</strong> Por hoje é isso, forte abraço e até a próxima!</p><p><a href="https://youtu.be/sg1zFpNM5Jw" target="_blank" rel="noopener noreferrer"><img src="https://img.youtube.com/vi/sg1zFpNM5Jw/0.jpg" alt="Live TDD na prática - Diego Fernandes e Rodrigo Manguinho"></a></p><ul><li>Repositório código fonte: <a href="https://github.com/mrbrunelli/tdd-pega-o-maior-numero" target="_blank" rel="noopener noreferrer">https://github.com/mrbrunelli/tdd-pega-o-maior-numero</a></li></ul>]]></content:encoded>
            <category>tdd</category>
            <category>testes</category>
            <category>teste unitário</category>
        </item>
        <item>
            <title><![CDATA[O impacto da educação em minha vida]]></title>
            <link>https://mrbrunelli.github.io/blog/o-impacto-da-educação-em-minha-vida</link>
            <guid>o-impacto-da-educação-em-minha-vida</guid>
            <pubDate>Fri, 07 May 2021 00:00:00 GMT</pubDate>
            <description><![CDATA[Meu último emprego antes de me tornar Desenvolvedor em 2019 era de Auxiliar de Produção em uma fábrica aqui da cidade...]]></description>
            <content:encoded><![CDATA[<p><img alt="Education Banner" src="/blog/assets/images/education-b10b3c1f8adccbed991bcf30d07ae738.jpeg" width="1400" height="600"></p><p>Ontem enquanto organizava minha gaveta, me deparei com minha certidão de casamento, onde estava escrito na primeira linha:</p><blockquote><p>MATHEUS RICARDO BRUNELLI, brasileiro, de profissão: Auxiliar de Produção. Ano 2018.</p></blockquote><p>Meu último emprego antes de me tornar Desenvolvedor em 2019 era de Auxiliar de Produção em uma fábrica aqui da cidade. O trabalho era muito simples, porem muito desgastante, Dorflex e Torsilax (não é propaganda) faziam parte da minha intensa semana.</p><h3 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="tecnologia-uma-realidade-crescente">Tecnologia, uma realidade crescente<a class="hash-link" href="#tecnologia-uma-realidade-crescente" title="Link direto para o título">​</a></h3><p>Certo dia a fábrica inteira parou para ouvir o anúncio dos coordenadores das faculdades da região, e foi anunciado dentre os demais cursos o curso de Sistemas para Internet, e a fala do coordenador <a href="https://www.linkedin.com/in/profburnes" target="_blank" rel="noopener noreferrer">Anderson Burnes</a> (que eu já conhecia) foi muito convincente, pois naquele ano várias empresas estavam passando por transformações digitais, e estavam precisando de desenvolvedores qualificados, e os salários eram bem diferentes da minha realidade.</p><p>Eu trabalhava muito para conseguir sustentar a minha família (eu, esposa e os doguinhos) e mesmo assim não era suficiente, um pneu furado ou uma gripe eram suficientes para acabar com nossas economias do mês rsrs.</p><h3 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="educação-um-investimento-muito-rentável">Educação, um investimento muito rentável<a class="hash-link" href="#educação-um-investimento-muito-rentável" title="Link direto para o título">​</a></h3><p>Eu sabia que o único caminho para uma mudança de vida, era através da educação. E naquele ano estudei muito para o Enem, e consegui uma Bolsa ProUni para o curso de Sistemas para Internet na <a href="https://www.alfaumuarama.edu.br/fau" target="_blank" rel="noopener noreferrer">UniAlfa</a>.</p><p>Me lembro que dessa vez eu não estava apenas fazendo um curso por fazer, eu estava colocando todas minhas energias em algo que eu acreditava poder mudar minha vida.</p><h3 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="esforço-no-lugar-certo">Esforço no lugar certo<a class="hash-link" href="#esforço-no-lugar-certo" title="Link direto para o título">​</a></h3><p>Durante os primeiros semestres, percebi que existiam muitos caminhos para seguir profissão, alguns bem confusos, e eu precisaria ter foco em algo para poder me destacar. Comecei a pesquisar por tecnologias que me ajudariam a entrar no mercado mais rápido, pois essa era minha maior motivação.</p><p>Quando obtive um mínimo de confiança nessas tecnologias, pedi demissão do meu emprego na fábrica, para que eu pudesse me dedicar aos estudos de forma integral. Minha família ficou com muito medo da minha decisão, afinal, não haviam garantias que eu conseguiria entrar na área, antes da nossa minúscula reserva financeira acabar.</p><h3 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="fé-foco-e-medo">Fé, foco e medo<a class="hash-link" href="#fé-foco-e-medo" title="Link direto para o título">​</a></h3><p>Foram esses três elementos que me acompanharam nessa transição. Fé porque nós não enxergamos o amanhã. Foco porque o tempo é escasso. Medo porque ele funciona como uma balança, quanto mais arriscado, mais sentimos medo.</p><p>Como todo trabalhado duro traz recompensas, a minha chegou aos 45 do segundo tempo, quando só restavam algumas moedinhas no cofre. Consegui meu primeiro emprego na área, graças ao networking (vou escrever um artigo só desse cara) e ao meu esforço é claro.</p><h3 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="mercado-aquecido">Mercado aquecido<a class="hash-link" href="#mercado-aquecido" title="Link direto para o título">​</a></h3><p>Se eu pudesse deixar um conselho para quem está começando, seria:</p><blockquote><p>Estude, e faça de tudo para tentar entrar no mercado. Tenha foco, e invista seu tempo estudando o que te dará retorno.</p></blockquote><p>Nem só de teoria vive o programador. Essa é uma profissão muito prática, quanto mais se exercita, mais se aprende. Os melhores exercícios são os problemas reais de uma empresa. Mesmo que ganhando pouco no começo, trabalhar com problemas reais não tem preço, essa experiência não pode ser adquirida de outra forma.</p><h3 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="considerações-finais">Considerações finais<a class="hash-link" href="#considerações-finais" title="Link direto para o título">​</a></h3><p>Esse foi meu primeiro artigo, fiquei muito empolgado ao escrevê-lo. Se você chegou até aqui, meus agradecimentos. Espero que tenha sido útil para você.</p><p>Forte abraço, e até o próximo artigo!</p>]]></content:encoded>
            <category>educação</category>
            <category>a importância da educação</category>
            <category>aprendizado</category>
        </item>
    </channel>
</rss>